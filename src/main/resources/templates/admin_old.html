<!DOCTYPE html>
<html 
	xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head><th:block th:replace="fragments/head :: header"/>
	<title>Admin</title>
	<link rel="stylesheet" th:href="@{/css/admin.css}" href="css/admin.css" type="text/css"/>


</head>
<body>
	<nav th:replace="fragments/nav.html :: nav">
		Nav goes here
	</nav>
	
		<div class="container">
		<div class="main">
			<h1 th:text="#{admin.welcome}">Panel de Administración</h1>
			
			<div class="card mb-4">
				<div class="card-header bg-info text-white">
					<h4 class="mb-0">⚙️ Configuración</h4>
				</div>
				<div class="card-body">
					<ul class="list-unstyled">
						<li><strong>Directorio local:</strong> <span class="badge badge-secondary" th:text="${basePath}">tal</span></li>
						<li><strong>Perfiles activos:</strong> <span class="badge badge-success mx-1" th:each="a: ${activeProfiles}" th:text="${a}">tal</span></li>
					</ul>
				</div>
			</div>
			
			<h4>👥 Usuarios</h4>
			
			<div class="table-responsive">
				<table class="table table-hover adminTable">
					<thead>
						<tr>
							<th>Usuario</th>
							<th>Estado</th>
							<th>Acción</th>
						</tr>
					</thead>
					<tbody>
						<tr th:each="u: ${users}">
							<td>
								<a class="font-weight-bold" th:href="@{/user/{id}(id=${u.id})}" th:text="${u.username}">Pepe</a>
							</td>
							<td>
								<span th:if="${u.enabled}" class="badge badge-success">✓ Activo</span>
								<span th:unless="${u.enabled}" class="badge badge-danger">✗ Deshabilitado</span>
							</td>
							<td>
								<form method="post" th:action="@{/admin/toggleuser(id=${u.id})}">
									<button class="btn btn-sm" th:classappend="${u.enabled ? 'btn-warning' : 'btn-success'}" type="submit">
										<span th:text="${u.enabled ? '🔒 Deshabilitar' : '🔓 Habilitar'}">🔒</span>
									</button>
								</form>
							</td>
						</tr>
					</tbody>
				</table>
			</div>
			
		</div>
	</div>
		
	<footer th:replace="fragments/footer.html :: footer">
		Footer goes here
	</footer>
</body>
</html>
