<!DOCTYPE html>
<html 
	xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
	<title>Nav fragment</title>
</head>
<body>
	<nav th:fragment="nav" class="navbar-enterprise">
		<div class="navbar-container">
			<!-- Brand/Logo -->
			<a class="navbar-brand" 
			   th:href="${session.u != null ? (session.u.hasRole('ADMIN') ? '/admin/' : '/') : '/'}">
				<div class="navbar-logo">
					<i class="fas fa-print"></i>
				</div>
				<span class="navbar-title">Sistema de Gesti贸n de Impresoras</span>
			</a>
			
			<!-- Actions: Usuario autenticado -->
			<div class="navbar-actions" th:if="${session.u}">
				<!-- Bot贸n Admin (solo para admins) -->
				<a th:if="${session.u.hasRole('ADMIN')}" 
				   th:href="@{/admin/}" 
				   class="nav-btn">
					<i class="fas fa-cog"></i>
					<span>Administrar</span>
				</a>
				
				<!-- Cerrar sesi贸n -->
				<form th:action="@{/logout}" method="post" class="logout-form">
					<button type="submit" class="nav-btn nav-btn-danger">
						<i class="fas fa-sign-out-alt"></i>
						<span>Salir</span>
					</button>
				</form>
			</div>
			
			<!-- Actions: Usuario no autenticado -->
			<div class="navbar-actions" th:unless="${session.u}">
				<a th:href="@{/login}" class="nav-btn nav-btn-primary">
					<i class="fas fa-sign-in-alt"></i>
					<span>Iniciar sesi贸n</span>
				</a>
				
				<!-- Debug buttons (solo en modo debug) -->
				<div class="debug-section" th:if="${application.debug}">
					<form th:action="@{/login}" method="post">
						<input type="hidden" name="username" value="a">
						<input type="hidden" name="password" value="aa">
						<button type="submit">Dev: a</button>
					</form>
					<form th:action="@{/login}" method="post">
						<input type="hidden" name="username" value="b">
						<input type="hidden" name="password" value="aa">
						<button type="submit">Dev: b</button>
					</form>
				</div>
			</div>
		</div>
	</nav>
</body>
</html>
