<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<body>
    <!-- Modales para Impresoras - Usa modales compartidos -->
    <div th:fragment="modals">
        <div th:replace="fragments/shared-modals :: printerModals"></div>
        <div th:replace="fragments/shared-modals :: networkModals"></div>
        
        <!-- Modal de Progreso de Escaneo (especÃ­fico de impresoras) -->
        <div id="scanProgressModal" class="modal">
            <div class="modal-content scan-modal-content">
                <div class="modal-header scan-modal-header">
                    <h3><i class="fas fa-sync fa-spin"></i> Escaneando Red...</h3>
                    <button class="btn-minimize-scan" onclick="minimizeScanModal()" title="Minimizar">
                        <i class="fas fa-minus"></i>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="scan-progress-wrapper">
                        <div class="scan-progress-info">
                            <span id="scanProgress">0%</span>
                            <span id="scanDetails">Preparando escaneo...</span>
                        </div>
                        <div class="scan-progress-bar-bg">
                            <div id="progressBar" class="scan-progress-bar"></div>
                        </div>
                    </div>
                    
                    <div class="scan-stats-container">
                        <div class="scan-stats-grid-2">
                            <div>
                                <div class="scan-stat-item">Red Actual:</div>
                                <div id="currentNetwork" class="scan-stat-network">--</div>
                            </div>
                            <div>
                                <div class="scan-stat-item">Impresoras Encontradas:</div>
                                <div id="foundPrinters" class="scan-stat-printers">0</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="scan-message-wrapper">
                        <div id="scanMessage"><i class="fas fa-hourglass-half"></i> Por favor espera...</div>
                        <button id="forceCompleteBtn" class="btn btn-sm btn-warning scan-force-btn"
                                onclick="forceComplete()">
                            <i class="fas fa-exclamation-triangle"></i> Forzar Completar
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Barra de Progreso Minimizada (Esquina Inferior Derecha) -->
        <div id="scanProgressMinimized" class="scan-minimized-bar" style="display: none;">
            <div class="scan-minimized-content" onclick="restoreScanModal()">
                <div class="scan-minimized-header">
                    <i class="fas fa-sync fa-spin"></i>
                    <span>Escaneando Red...</span>
                    <span id="scanProgressMinimizedPercent" class="scan-minimized-percent">0%</span>
                </div>
                <div class="scan-minimized-progress-bar">
                    <div id="scanProgressMinimizedBar" class="scan-minimized-progress-fill"></div>
                </div>
                <div class="scan-minimized-info">
                    <span id="scanMinimizedNetwork" class="scan-minimized-network">--</span>
                    <span id="scanMinimizedPrinters" class="scan-minimized-printers">0 impresoras</span>
                </div>
            </div>
        </div>
    </div>
</body>
</html>
</body>
</html>
