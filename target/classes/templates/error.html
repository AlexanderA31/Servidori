<!DOCTYPE html>
<html 
	xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head><th:block th:replace="fragments/head :: header"/>
	<title th:text="IU: Error ${status}">IU: Error</title>
</head>
<body>
	<nav th:replace="fragments/nav.html :: nav">
		Nav goes here
	</nav>
	
		<div class="container">
		<div class="main">
			<div class="text-center">
				<h1 style="font-size: 4rem; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">⚠️ Error <span th:text="${status}"></span></h1>
			</div>
			
			<div th:unless="${application.debug}" class="text-center">
				<div class="card" style="border: none; box-shadow: 0 10px 30px rgba(0,0,0,0.1);">
					<div class="card-body">
						<img th:src="|https://http.cat/${status}|" alt="gato ilustrando problema" class="img-fluid rounded mb-4" style="max-width: 400px;"/>
						<p class="lead">Los administradores están informados. Puedes volver a intentar hacer lo que estabas haciendo de otra forma, o esperar a que solucionen el problema.</p>
						<a href="/" class="btn btn-primary mt-3" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border: none;">🏠 Volver al inicio</a>
					</div>
				</div>
			</div>
				<div th:if="${application.debug}">
				<div class="alert alert-warning" role="alert">
					<strong>🔧 Modo Debug:</strong> Ha pasado algo feo. Mira el log del servidor para saber más detalles.
				</div>

				<h4 class="mt-4">📊 Detalles del error</h4>
				<table class="table table-striped errTable">
		<tr><td>Date<td th:text="${timestamp}">
		<tr><td>Path<td th:text="${path}">
		<tr><td>Error<td th:text="${error}">
		<tr><td>Status<td th:text="${status}">
		<tr><td>Mensaje<td th:text="${message}">
		<tr><td>Excepción<td th:text="${exception}">
		<tr><td>Traza<td><pre th:text="${trace}"/>
	</table>

	<h4>Variables definidas en sesión</h4>
	<table class="errTable">
		<tr th:each="v: ${session}">
		<td><span class="errKey" th:text="${v.key}"></span>
		<td th:text="${v.value}">
	</table>

	<h4>Variables definidas en parámetros</h4>
	<table class="errTable">
		<tr th:each="v: ${param}">
		<td th:text="${v.key}">
		<td> <div th:each="v: ${v.value}"><div th:text="${v}"></div></div>
	</table>

	<h4>Otras</h4>
	<table class="errTable">
		<tr><td>req.url
			<td th:text="${#request.requestURL}">
		<tr><td>req.uri
			<td th:text="${#request.requestURI}">
		<tr><td>req.getHeader("User-Agent")
			<td th:text="${#request.getHeader('User-Agent')}">			
	</table>

	</div>
	
	</div> <!-- end main div -->
	</div> <!-- end container div -->
	
	<footer th:replace="fragments/footer.html :: footer">
		Footer goes here
	</footer>
</body>
</html>
